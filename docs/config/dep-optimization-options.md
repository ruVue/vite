# Параметры оптимизации зависимостей

- **Связанный:** [Dependency Pre-Bundling](/guide/dep-pre-bundling)

## optimizeDeps.entries

- **Тип:** `string | string[]`

По умолчанию Vite будет сканировать все ваши файлы `.html`, чтобы обнаружить зависимости, которые необходимо предварительно связать (игнорируя `node_modules`, `build.outDir`, `__tests__` и `coverage`). Если указан `build.rollupOptions.input`, Vite вместо этого будет сканировать эти точки входа.

Если ни один из них не соответствует вашим потребностям, вы можете указать пользовательские записи с помощью этой опции — значение должно быть [шаблон fast-glob](https://github.com/mrmlnc/fast-glob#basic-syntax) или массивом шаблоны, которые являются относительными от корня проекта Vite. Это перезапишет вывод записей по умолчанию. Только папки `node_modules` и `build.outDir` будут игнорироваться по умолчанию, если `optimizeDeps.entries` определен явно. Если необходимо игнорировать другие папки, вы можете использовать шаблон игнорирования как часть списка записей, помеченный начальным `!`.

## optimizeDeps.exclude

- **Тип:** `string[]`

Зависимости, которые следует исключить из предварительной сборки.

:::warning CommonJS
Зависимости CommonJS не следует исключать из оптимизации. Если зависимость ESM исключена из оптимизации, но имеет вложенную зависимость CommonJS, зависимость CommonJS должна быть добавлена в `optimizeDeps.include`. Пример:

```js
export default defineConfig({
  optimizeDeps: {
    include: ['esm-dep > cjs-dep'],
  },
})
```

:::

## optimizeDeps.include

- **Тип:** `string[]`

По умолчанию связанные пакеты не внутри `node_modules` предварительно не объединяются. Используйте этот параметр, чтобы предварительно объединить связанный пакет.

## optimizeDeps.esbuildOptions

- **Тип:** [`EsbuildBuildOptions`](https://esbuild.github.io/api/#simple-options)

Параметры для передачи в esbuild во время сканирования и оптимизации.

Некоторые параметры опущены, поскольку их изменение несовместимо с оптимизацией Vite.

- `external` также опущен, используйте опцию Vite `optimizeDeps.exclude`
- `plugins` объединены с плагином dep Vite

## optimizeDeps.force

- **Тип:** `boolean`

Установите значение `true`, чтобы принудительно выполнить предварительное объединение зависимостей, игнорируя ранее кэшированные оптимизированные зависимости.
